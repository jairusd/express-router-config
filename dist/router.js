"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};exports.default=configureRoutes;function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function sortByNumberOfSlashes(a,b){a=a.match.split("/"),b=b.match.split("/");var c=b.length,d=a.length,e=b[b.length-1].length,f=a[a.length-1].length;return c===d?e-f:c-d}function sortRoutes(a){if(!Array.isArray(a))throw new Error("routes are expected to be an array of object, "+("undefined"==typeof a?"undefined":_typeof(a))+" given.");return a.sort(sortByNumberOfSlashes)}function normalizeEndpoint(a){return"/"+a.replace(/^\/|\/$/,"")}function routeTranslator(a,b,c){return Array.isArray(a)?a.map(function(a){return a.group?routeTranslator(a.routes,a.middleware,a.group):routeTranslator(a,b,c)}):(b=[b,a.middleware].filter(function(a){return a}),c=c?(""+c+a.match).replace("//","/"):a.match,{method:a.method,match:normalizeEndpoint(c),middleware:b,action:a.action})}function configureRoutes(a){return function(b){var c;return b=sortRoutes((c=[]).concat.apply(c,_toConsumableArray(routeTranslator(b)))),b.map(function(b){return b.middleware.length?a[b.method].apply(a,[b.match].concat(_toConsumableArray(b.middleware),[b.action])):a[b.method](b.match,b.action)})}}